/* mobile-fix.css - V2 */

/* 1. GLOBAL RESET */
*, *::before, *::after {
    box-sizing: border-box !important;
}

#viewer > canvas {
    width: 100% !important;
    height: 100% !important;
}

/* The '.mobile-view' class is added by 'mobile-fix.js' for screens < 768px */

/* 2. FIX POPUP WINDOWS & IFRAMES */
/* Target the generic 'Window' class which acts as a container for popups. */
.mobile-view .Window {
    /* Force to full width and height, remove hardcoded pixel values. */
    width: 100% !important;
    height: 100% !important;
    max-width: 100vw !important;
    max-height: 100svh !important; /* Use Small Viewport Height */
    top: 0 !important;
    left: 0 !important;
    transform: none !important; /* Reset any transforms */

    /* Ensure content inside can scroll */
    display: flex !important;
    flex-direction: column !important;
}

/* Target iframe containers specifically. 3DVista uses 'WebFrame' for this. */
.mobile-view .WebFrame {
    flex-grow: 1 !important; /* Allow the iframe container to fill available space */
    overflow: hidden !important; /* Prevent iframe from overflowing its container */
}

.mobile-view .WebFrame iframe {
    width: 100% !important;
    height: 100% !important;
}


/* 3. FIX BUTTONS AND ICONS SIZING */
/* Target hotspot overlays and other clickable elements. */
.mobile-view .HotspotPanoramaOverlay,
.mobile-view .SpriteModel3DObject {
    /* Make touch targets larger and prevent them from shrinking too much */
    transform: scale(1.2) !important;
    transform-origin: center center;
}

/* Target generic Button components */
.mobile-view .Button {
    min-width: 48px !important;
    min-height: 48px !important;
    font-size: 16px !important; /* Make font readable */
}

/* Fix the close button on the popup image viewer */
.mobile-view #closeButtonPopupPanorama {
    transform: scale(1.5) !important;
    top: 15px !important;
    right: 15px !important;
}


/* 4. FIX VISIBILITY / CLIPPING */
/* Force overflow to be visible on key containers. */
/* The #tdv-container is a likely candidate for clipping content. */
.mobile-view,
.mobile-view #tdv-container,
.mobile-view .viewer-container { /* Adding this generic one just in case */
    overflow: visible !important;
}

/* The main viewer should still hide overflow to prevent scrollbars on the tour itself */
.mobile-view #viewer {
    overflow: hidden !important;
}
